(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-setting-account-security-change-password-change-password"],{"20e8":function(e,t,s){"use strict";s.r(t);var a=s("35f7"),o=s("ba8b");for(var n in o)"default"!==n&&function(e){s.d(t,e,function(){return o[e]})}(n);s("4c7d");var i=s("2877"),r=Object(i["a"])(o["default"],a["a"],a["b"],!1,null,"6153e848",null);t["default"]=r.exports},"35f7":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-uni-form",{staticClass:"content",on:{submit:function(t){t=e.$handleEvent(t),e.register(t)}}},[s("v-uni-view",{staticClass:"input-group"},[s("v-uni-view",{staticClass:"input-row border"},[s("v-uni-text",{staticClass:"title"},[e._v("旧  密  码：")]),s("m-input",{attrs:{type:"password",displayable:"",maxlength:"16",placeholder:"请输入正在使用的密码"},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}})],1),s("v-uni-view",{staticClass:"input-row border"},[s("v-uni-text",{staticClass:"title"},[e._v("新  密  码：")]),s("m-input",{attrs:{type:"password",displayable:"",maxlength:"16",placeholder:"至少8位数字与字母组合"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),s("v-uni-view",{staticClass:"input-row border"},[s("v-uni-text",{staticClass:"title"},[e._v("确认密码：")]),s("m-input",{attrs:{type:"password",displayable:"",maxlength:"16",placeholder:"请输入密码"},model:{value:e.checkPassword,callback:function(t){e.checkPassword=t},expression:"checkPassword"}})],1)],1),s("v-uni-view",{staticClass:"btn-row"},[s("v-uni-button",{staticClass:"primary",attrs:{type:"primary",formType:"submit"}},[e._v("修改")])],1)],1)},o=[];s.d(t,"a",function(){return a}),s.d(t,"b",function(){return o})},"39e5":function(e,t,s){t=e.exports=s("2350")(!1),t.push([e.i,".content[data-v-6153e848]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background-color:#efeff4}",""])},"4c7d":function(e,t,s){"use strict";var a=s("fc6b"),o=s.n(a);o.a},a768:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s("2f62"),o=l(s("58cc")),n=l(s("8030")),i=l(s("a35e")),r=s("0f52");function l(e){return e&&e.__esModule?e:{default:e}}var d={computed:(0,a.mapState)(["hasLogin","userInfo","token"]),components:{mInput:o.default},data:function(){return{}},methods:{register:function(){var e=this,t=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,}$/;if(this.password.length<8)uni.showToast({icon:"none",title:"密码最短为 8 个字符"});else if(t.test(this.password))if(this.password==this.checkPassword){var s=this,a=i.default.urls.changePassword;s.password=(0,r.hex_md5)(s.password);var o={oldPassword:(0,r.hex_md5)(s.oldPassword),newPassword:s.password};i.default.req.put(a,o,function(t){if(0===t.code){uni.showToast({icon:"none",title:"修改成功"});var a=i.default.urls.login,o={phone:e.userInfo.phone,password:s.password};i.default.req.get(a,o,function(e){if(0===e.code){n.default.commit("login",{token:e.data,phone:o.phone,password:o.password});var t=i.default.urls.getSelfUserInfo,s={};i.default.req.get(t,s,function(e){if(0===e.code){var t=i.default.urls.getHead,s={};i.default.req.get(t,s,function(t){if(0===t.code){var s=e.data;s.headUrl=t.data,delete s.password,n.default.commit("saveUserInfo",s)}else{var a=e.data;a.headUrl="/static/icons/logo.png",delete a.password,n.default.commit("saveUserInfo",a)}})}else uni.showModal({content:e.msg,showCancel:!1})})}else uni.showModal({content:e.msg,showCancel:!1})}),uni.navigateBack()}else uni.showModal({content:t.msg,showCancel:!1})})}else uni.showToast({icon:"none",title:"两次密码不一致"});else uni.showToast({icon:"none",title:"密码必须为字母和数字的组合"})}}};t.default=d},ba8b:function(e,t,s){"use strict";s.r(t);var a=s("a768"),o=s.n(a);for(var n in a)"default"!==n&&function(e){s.d(t,e,function(){return a[e]})}(n);t["default"]=o.a},fc6b:function(e,t,s){var a=s("39e5");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=s("4f06").default;o("4148d2d2",a,!0,{sourceMap:!1,shadowMode:!1})}}]);