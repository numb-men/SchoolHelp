(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-add-post-add-post"],{9342:function(t,e,i){"use strict";i.r(e);var n=i("e694"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},a860:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/*每个页面公共css */.content[data-v-01f4382e]{background:#fefefe;border-top:1px solid #e9e9e9}.devide-line[data-v-01f4382e]{width:100%;height:1px;background:#e9e9e9}.normal-icon-box[data-v-01f4382e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-top:%?10?%;width:%?120?%}.normal-icon-box-icon[data-v-01f4382e]{width:%?36?%;height:%?36?%;margin:%?7?% %?10?%}.normal-icon-box-text[data-v-01f4382e]{max-width:%?60?%;font-size:%?26?%;line-height:%?50?%;color:#666;text-align:left;font-weight:400}.big-icon-box[data-v-01f4382e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;width:%?120?%}.big-icon-box-icon[data-v-01f4382e]{width:%?34?%;height:%?34?%;padding:%?3?% 0;margin-right:%?5?%}.big-icon-box-text[data-v-01f4382e]{max-width:%?75?%;font-size:%?30?%;line-height:%?40?%;color:#343131;text-align:left;font-weight:400}.normal-icon[data-v-01f4382e]{width:%?36?%;height:%?36?%;margin:%?7?% %?10?%}.large-icon[data-v-01f4382e]{width:%?45?%;height:%?45?%;margin:%?7?% %?10?%}.add-post-box[data-v-01f4382e]{padding:0 %?15?%}.post-title[data-v-01f4382e]{width:%?710?%;padding:%?10?% %?5?%;font-size:%?45?%;line-height:%?50?%;color:#666;text-align:left;font-weight:400}.title-placeholder[data-v-01f4382e]{padding:%?10?% %?5?%;font-size:%?45?%;line-height:%?50?%;color:#666;text-align:left;font-weight:400}.post-content[data-v-01f4382e]{width:%?720?%;-webkit-box-sizing:border-box;box-sizing:border-box;height:%?600?%;padding:%?10?% %?5?%;font-size:%?30?%;line-height:%?40?%;color:#666;text-align:left;font-weight:400}.content-word-count[data-v-01f4382e],.title-word-count[data-v-01f4382e]{font-size:%?22?%;line-height:%?40?%;color:#666;text-align:right;font-weight:400}.content-placeholder[data-v-01f4382e]{font-size:%?30?%;line-height:%?40?%;color:#666;text-align:left;font-weight:400;color:#c9c9c9}.content-word-count[data-v-01f4382e]{position:fixed;bottom:%?230?%;right:%?35?%}.tags-box[data-v-01f4382e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:left;-webkit-justify-content:left;-ms-flex-pack:left;justify-content:left;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:%?15?% %?10?%;position:fixed;bottom:%?120?%;left:0;min-width:%?750?%;max-width:%?1500?%;-webkit-box-sizing:border-box;box-sizing:border-box}.post-points[data-v-01f4382e],.post-sorted[data-v-01f4382e],.set-points[data-v-01f4382e],.set-sort[data-v-01f4382e],.tag[data-v-01f4382e]{font-size:%?28?%;line-height:%?40?%;color:#666;text-align:center;font-weight:400;height:%?40?%;max-width:%?200?%;padding:%?5?% %?10?%;border-radius:%?5?%;margin:%?5?%;background:#f6f6f6}.tag-input-box[data-v-01f4382e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;position:fixed;bottom:%?280?%;z-index:100;left:%?70?%;width:%?590?%;font-size:%?32?%;line-height:%?60?%;color:#343131;text-align:center;font-weight:400;border:1px solid #e9e9e9;border-radius:%?10?%;padding-left:%?15?%}.tag-input-box-input[data-v-01f4382e]{font-size:%?32?%;line-height:%?32?%;color:#343131;text-align:left;font-weight:400;padding:0 %?5?%;width:%?400?%;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;background:#fefefe}.tag-input-box-add-btn[data-v-01f4382e]{padding:0 %?20?%;font-size:%?32?%;line-height:%?58?%;color:#fefefe;text-align:center;font-weight:400;background:#09f}.tag-input-box-icon-cancel[data-v-01f4382e]{width:%?36?%;height:%?36?%;padding:%?12?% %?8?%;background:#f6f6f6}.add-post-bottom[data-v-01f4382e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:%?750?%;height:%?120?%;padding:%?30?% %?10?%;position:fixed;-webkit-box-sizing:border-box;box-sizing:border-box;bottom:0;left:0;border-top:1px solid #c9c9c9}.row-left[data-v-01f4382e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:none;-webkit-justify-content:none;-ms-flex-pack:none;justify-content:none;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.row-right[data-v-01f4382e]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-right:%?20?%}.normal-icon[data-v-01f4382e]{width:%?40?%;height:%?40?%;margin:%?7?% %?10?%;margin:%?7?% %?10?%}.send[data-v-01f4382e]{font-size:%?32?%;line-height:%?45?%;color:#fefefe;text-align:center;font-weight:400;height:%?45?%;padding:%?5?% %?15?%;border-radius:%?5?%;background:#09f;margin-left:%?15?%}',""])},ace7:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"add-post-box"},[i("v-uni-view",{staticClass:"title-word-count"},[t._v(t._s(t.post.titleWordCount)+"/15")]),i("v-uni-input",{staticClass:"post-title",attrs:{type:"text",value:t.post.postTitle,placeholder:"输入标题","placeholder-class":"title-placeholder",maxlength:"15",focus:"true","confirm-type":"done"},on:{input:function(e){e=t.$handleEvent(e),t.bindTitleInput(e)}}}),i("v-uni-view",{staticClass:"devide-line"}),i("v-uni-textarea",{staticClass:"post-content",attrs:{value:t.post.postContent,placeholder:"添加内容(至少15个字)",maxlength:"400","placeholder-class":"content-placeholder"},on:{input:function(e){e=t.$handleEvent(e),t.bindContentInput(e)}}})],1),i("v-uni-view",{staticClass:"content-word-count"},[t._v(t._s(t.post.contentWordCount)+"/400")]),i("v-uni-view",{staticClass:"tags-box"},[i("v-uni-view",{staticClass:"tag",on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.showTagInputBox(e)}}},[t._v("添加标签")]),t._l(t.post.tags,function(e,n){return i("v-uni-view",{key:n,staticClass:"tag",attrs:{id:"tag"+n}},[t._v(t._s(e))])})],2),t.showTagInput?i("v-uni-view",{staticClass:"tag-input-box"},[i("v-uni-input",{staticClass:"tag-input-box-input",attrs:{type:"text",placeholder:"七个字以内",maxlength:"7"},model:{value:t.tagInputContent,callback:function(e){t.tagInputContent=e},expression:"tagInputContent"}}),i("v-uni-view",{staticClass:"tag-input-box-add-btn",on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.addTag(e)}}},[t._v("添加")]),i("v-uni-image",{staticClass:"tag-input-box-icon-cancel",attrs:{src:"/static/icons/delete-gray.png"},on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.hideTagInputBox(e)}}})],1):t._e(),i("v-uni-view",{staticClass:"add-post-bottom"},[i("v-uni-view",{staticClass:"row-left"},[i("v-uni-picker",{staticClass:"set-points",attrs:{range:t.pointsRange,value:t.pointsSelected},on:{change:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.selectPoints(e)}}},[t._v("设置分数")]),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:-1!=t.post.points,expression:"post.points!=-1"}],staticClass:"post-points"},[t._v(t._s(t.post.points))]),i("v-uni-picker",{staticClass:"set-sort",attrs:{range:t.postTypeRange,value:t.postTypeSelected},on:{change:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.selectPostType(e)}}},[t._v("设置分类")]),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:-1!=t.post.postType,expression:"post.postType!=-1"}],staticClass:"post-sorted"},[t._v(t._s(t.postTypeComputed))])],1),i("v-uni-view",{staticClass:"row-right"},[i("v-uni-image",{staticClass:"normal-icon",attrs:{src:"/static/icons/emoji.png",mode:""}}),i("v-uni-image",{staticClass:"normal-icon",attrs:{src:"/static/icons/pic.png",mode:""}}),i("v-uni-view",{staticClass:"send",on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.sendPost(e)}}},[t._v("发送")])],1)],1)],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},be90:function(t,e,i){"use strict";i.r(e);var n=i("ace7"),o=i("9342");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("c465");var s=i("2877"),l=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"01f4382e",null);e["default"]=l.exports},c465:function(t,e,i){"use strict";var n=i("f159"),o=i.n(n);o.a},e694:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{post:{title:"",content:"",tags:[],titleWordCount:0,contentWordCount:0,points:-1,postType:-1},showTagInput:!1,tagInputContent:"",pointsRange:[0,5,10,20,50,100,200],postTypeRange:["学术论坛","校园动态","二手交易","缺个伴吗","帮你干活","经验交流"],pointsSelected:0,postTypeSelected:0}},computed:{postTypeComputed:function(){return this.postTypeRange[this.post.postType]}},methods:{bindTitleInput:function(t){this.post.title=t.target.value,this.post.titleWordCount=t.target.value.length},bindContentInput:function(t){this.post.content=t.target.value,this.post.contentWordCount=t.target.value.length},goBack:function(){uni.navigateBack({delta:1})},showTagInputBox:function(){this.post.tags.length<5?this.showTagInput=!0:uni.showToast({icon:"none",title:"最多添加5个标签哦"})},hideTagInputBox:function(){this.showTagInput=!1},addTag:function(){this.post.tags.length<5?(this.post.tags.push(this.tagInputContent),this.tagInputContent=""):(uni.showToast({icon:"none",title:"最多添加5个标签哦"}),this.tagInputContent="",this.hideTagInputBox())},selectPoints:function(t){this.post.points=this.pointsRange[t.detail.value]},selectPostType:function(t){this.post.postType=t.detail.value},sendPost:function(){var t=this;if(-1!=this.post.points)if(-1!=this.post.postType)if(this.post.title.length<5||this.post.title.length>15)uni.showToast({icon:"none",title:"帖子标题长度应在5-15之间"});else if(this.post.content.length<15||this.post.content.length>400)uni.showToast({icon:"none",title:"帖子内容长度应在15-400之间"});else{var e=this.$api.urls.sendPost,i=this.post;this.$api.req.post(e,i,function(e){console.log(e),e.code<0?uni.showToast({icon:"none",title:e.msg}):(uni.showToast({icon:"none",title:"发帖成功"}),setTimeout(function(){t.goBack()},500))})}else uni.showToast({icon:"none",title:"请设置帖子分类"});else uni.showToast({icon:"none",title:"请设置帖子积分"})}}};e.default=n},f159:function(t,e,i){var n=i("a860");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("2fb574e1",n,!0,{sourceMap:!1,shadowMode:!1})}}]);