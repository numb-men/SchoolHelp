(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-login-login"],{"0c75":function(t,e,i){"use strict";i.r(e);var o=i("b771"),n=i.n(o);for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);e["default"]=n.a},"140f":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".content[data-v-a4395338]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background-color:#efeff4}.action-row[data-v-a4395338]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center}.action-row uni-navigator[data-v-a4395338]{color:#007aff;padding:0 %?20?%}.oauth-row[data-v-a4395338]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:absolute;top:0;left:0;width:100%}.oauth-image[data-v-a4395338]{width:%?100?%;height:%?100?%;border:%?1?% solid #ddd;border-radius:%?100?%;margin:0 %?40?%;background-color:#fff}.oauth-image uni-image[data-v-a4395338]{width:%?60?%;height:%?60?%;margin:%?20?%}",""])},"55dc":function(t,e,i){"use strict";var o=i("8d26"),n=i.n(o);n.a},"82ac":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-form",{staticClass:"content",on:{submit:function(e){e=t.$handleEvent(e),t.bindLogin(e)}}},[i("v-uni-view",{staticClass:"input-group"},[i("v-uni-view",{staticClass:"input-row border"},[i("v-uni-text",{staticClass:"title"},[t._v("手机号：")]),i("m-input",{staticClass:"m-input",attrs:{type:"number",maxlength:"11",clearable:"",focus:"",placeholder:"请输入11位手机号"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),i("v-uni-view",{staticClass:"input-row"},[i("v-uni-text",{staticClass:"title"},[t._v("密    码：")]),i("m-input",{attrs:{type:"password",displayable:"",maxlength:"16",placeholder:"至少8~16位数字与字母组合"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),i("v-uni-view",{staticClass:"btn-row"},[i("v-uni-button",{staticClass:"primary",attrs:{type:"primary",loading:t.loading,formType:"submit"}},[t._v("登录")])],1),i("v-uni-view",{staticClass:"action-row"},[i("v-uni-navigator",{attrs:{url:"../register/register"}},[t._v("注册账号")]),i("v-uni-text",[t._v("|")]),i("v-uni-navigator",{attrs:{url:"../forget-password/forget-password"}},[t._v("忘记密码")])],1)],1)},n=[];i.d(e,"a",function(){return o}),i.d(e,"b",function(){return n})},"8d26":function(t,e,i){var o=i("140f");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("f4f26926",o,!0,{sourceMap:!1,shadowMode:!1})},a7eb:function(t,e,i){"use strict";i.r(e);var o=i("82ac"),n=i("0c75");for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);i("55dc");var r=i("2877"),s=Object(r["a"])(n["default"],o["a"],o["b"],!1,null,"a4395338",null);e["default"]=s.exports},b771:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i("2f62"),n=s(i("58cc")),a=(s(i("8030")),s(i("a35e"))),r=i("0f52");function s(t){return t&&t.__esModule?t:{default:t}}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},o=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),o.forEach(function(e){l(t,e,i[e])})}return t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var u={components:{mInput:n.default},computed:(0,o.mapState)(["hasLogin","userInfo","token"]),data:function(){return{loading:!1,providerList:[],hasProvider:!1,account:"",password:"",positionTop:0,msg:""}},methods:c({initPosition:function(){this.positionTop=uni.getSystemInfoSync().windowHeight-100},bindLogin:function(){var t=this,e=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,}$/;if(11!=this.account.length)return this.loading=!1,void uni.showToast({icon:"none",title:"手机号为11位数字"});if(!/^1(3|4|5|7|8)\d{9}$/.test(this.account))return this.loading=!1,void uni.showToast({icon:"none",title:"请检查手机号是否正确"});if(this.password.length<8)return this.loading=!1,void uni.showToast({icon:"none",title:"密码最短为 8 个字符"});if(!e.test(this.password))return this.loading=!1,void uni.showToast({icon:"none",title:"密码必须为字母和数字的组合"});this.password=(0,r.hex_md5)(this.password);var i=a.default.urls.login,o={phone:this.account,password:this.password};a.default.req.get(i,o,function(e){if(0===e.code){t.$store.commit("login",{token:e.data,phone:o.phone,password:o.password}),uni.showToast({icon:"none",title:"登陆成功"});var i=a.default.urls.getSelfUserInfo,n={};a.default.req.get(i,n,function(e){if(0===e.code){var i=a.default.urls.getHead,o={};a.default.req.get(i,o,function(i){if(0===i.code){console.log(e);var o=e.data;o.headUrl="http://"+i.data,delete o.password,t.$store.commit("saveUserInfo",o),uni.navigateBack()}else{var n=e.data;n.headUrl="/static/icons/logo.png",delete n.password,t.$store.commit("saveUserInfo",n),uni.navigateBack()}})}else uni.showModal({content:"获取用户信息失败！",showCancel:!1})})}else uni.showModal({content:e.msg,showCancel:!1})})},toMain:function(t){this.login(t),this.forcedLogin?uni.reLaunch({url:"../my"}):uni.navigateBack()}},(0,o.mapMutations)(["login"])),onReady:function(){this.initPosition()}};e.default=u}}]);